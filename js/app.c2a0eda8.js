(function(e){function t(t){for(var r,a,c=t[0],i=t[1],s=t[2],f=0,d=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);b&&b(t);while(d.length)d.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},u=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1daf8227":"cd6f288b","chunk-2d0b309a":"bdaa2d0b","chunk-2d0e13a6":"3e72598e","chunk-55b194de":"a99e5658","chunk-cb515cca":"6338073d"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-1daf8227":1,"chunk-55b194de":1,"chunk-cb515cca":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1daf8227":"12ab28ed","chunk-2d0b309a":"31d6cfe0","chunk-2d0e13a6":"31d6cfe0","chunk-55b194de":"865e6b1c","chunk-cb515cca":"a6c9ea42"}[e]+".css",o=i.p+r,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){s=d[c],f=s.getAttribute("data-href");if(f===r||f===o)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var r=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],b.parentNode.removeChild(b),n(u)},b.href=o;var l=document.getElementsByTagName("head")[0];l.appendChild(b)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=u);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=c(e);var d=new Error;s=function(t){f.onerror=f.onload=null,clearTimeout(b);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var b=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var b=f;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"245a":function(e,t,n){n("c975")},"41cb":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n("caad");var r=n("6c02"),a=(n("d3b7"),[{name:"主页",path:"/home",component:function(){return n.e("chunk-cb515cca").then(n.bind(null,"7abe"))},meta:{showBar:!0}},{name:"会员中心",path:"/user",component:function(){return n.e("chunk-1daf8227").then(n.bind(null,"e382"))},meta:{showBar:!0}},{name:"活动",path:"/activity",component:function(){return n.e("chunk-2d0e13a6").then(n.bind(null,"7a17"))},meta:{showBar:!0}},{name:"登录",path:"/login",component:function(){return n.e("chunk-55b194de").then(n.bind(null,"9ed6"))}},{path:"/:pathMatch(.*)*",name:"NotFound",component:function(){return n.e("chunk-2d0b309a").then(n.bind(null,"2754"))}}]),o=n("4360"),u=n("8ded"),c=n.n(u),i=n("323e"),s=n.n(i),f=(n("fddb"),n("9fb0"));s.a.configure({showSpinner:!1});var d=["/login","/register"],b="/login",l="/home",h=Object(r["a"])({history:Object(r["b"])(),routes:a});h.beforeEach((function(e,t,n){s.a.start(),c.a.get(f["a"])?(e.path===b||"/"===e.path?n({path:l}):(o["b"].getters.userInfo.username||o["b"].dispatch("GetInfo"),n()),s.a.done()):d.includes(e.path)?n():(n({path:b,query:{redirect:e.fullPath}}),s.a.done())})),h.afterEach((function(){s.a.done()}))},4360:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));var r=n("5502"),a=n("9fb0"),o=(n("b0c0"),n("d3b7"),n("8ded")),u=n.n(o),c=(n("e7e5"),n("d399")),i=n("bc3a"),s=n.n(i),f=s.a.create({baseURL:"/api",timeout:6e3}),d=function(e){if(e.response){var t=e.response.data;if(500===e.response.status)Object(c["a"])("服务器错误");else if(404===e.response.status)Object(c["a"])("404");else if(403===e.response.status)Object(c["a"])("Forbidden");else if(401!==e.response.status||t.result&&t.result.isLogin)Object(c["a"])("请求错误");else{Object(c["a"])("Authorization verification failed");var n=u.a.get(a["a"]);n&&(void 0).dispatch("Logout").then((function(){setTimeout((function(){window.location.reload()}),1500)}))}}return Promise.reject(e)};f.interceptors.request.use((function(e){var t=u.a.get(a["a"]);return t&&(e.headers["Authorization"]=t),e}),d),f.interceptors.response.use((function(e){var t=e.data;return t.code&&200!==t.code&&Object(c["a"])(t.message||"错误"),t}),d);var b=f,l={Login:"/login/mobile",Logout:"/auth/logout",ForgePassword:"/auth/forge-password",Register:"/auth/register",twoStepCode:"/auth/2step-code",SendSms:"/account/sms",SendSmsErr:"/account/sms_err",UserInfo:"/auth/info",UserMenu:"/resource/routes"};function h(e){return b({url:l.Login,method:"post",data:e})}var p={User:"/user",UserInfo:"/user/info"};function m(){return b({url:p.UserInfo,method:"get"})}var v={state:{token:"",name:"",nickName:"",avatar:"",userInfo:{}},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){var n=t.name,r=t.nickName;e.name=n,e.nickName=r},SET_AVATAR:function(e,t){e.avatar=t},SET_INFO:function(e,t){e.userInfo=t}},actions:{Login:function(e,t){var n=e.commit;return new Promise((function(e,r){h(t).then((function(t){200===t.code&&(u.a.set(a["a"],t.data,6048e5),n("SET_TOKEN",t.data)),e(t)})).catch((function(e){r(e)}))}))},GetInfo:function(e){var t=e.commit;return new Promise((function(e,n){m().then((function(r){var a=r.data;a||n(new Error("getInfo: roles must be a non-null array !"));var o=a.username,u=a.avatar,c=a.nickName;t("SET_INFO",a),t("SET_NAME",{name:o,nickName:c}),t("SET_AVATAR",u),e(r)})).catch((function(e){n(e)}))}))},Logout:function(e){var t=e.commit;e.state;return new Promise((function(e){u.a.remove(a["a"]),t("SET_TOKEN",""),t("SET_INFO",""),t("SET_NAME",{}),t("SET_AVATAR",""),e()}))}}},g={token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},nickname:function(e){return e.user.name},userInfo:function(e){return e.user.userInfo}},O=Object(r["a"])({modules:{user:v},state:{},mutations:{},actions:{},getters:g})},4907:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4056");var r=n("44bf"),a=(n("c3a6"),n("ad06")),o=(n("5f1a"),n("a3e2")),u=(n("0653"),n("34e9")),c=(n("c194"),n("7744")),i=(n("0ec5"),n("21ab")),s=(n("3df5"),n("2830")),f=(n("e7e5"),n("d399")),d=(n("ac1e"),n("543e")),b=(n("4b0a"),n("2bb1")),l=(n("7844"),n("5596")),h=(n("a52c"),n("2ed4")),p=(n("537a"),n("ac28")),m=(n("be7f"),n("565f")),v=(n("5852"),n("d961")),g=(n("66b9"),n("b650")),O=(n("38d5"),n("772a")),j=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7a23")),k=Object(j["N"])("data-v-5678b0f6");Object(j["z"])("data-v-5678b0f6");var y={id:"app"},w=Object(j["h"])(" 主页 "),E=Object(j["h"])(" 活动 "),_=Object(j["h"])(" 个人 ");Object(j["x"])();var S,T=k((function(e,t,n,r,a,o){var u=Object(j["D"])("router-view"),c=Object(j["D"])("van-tabbar-item"),i=Object(j["D"])("van-tabbar");return Object(j["w"])(),Object(j["f"])("div",y,[Object(j["i"])(u),e.$route.meta.showBar?(Object(j["w"])(),Object(j["f"])(i,{key:0,route:""},{default:k((function(){return[Object(j["i"])(c,{replace:"",to:"/home",icon:"home-o"},{default:k((function(){return[w]})),_:1}),Object(j["i"])(c,{replace:"",to:"/activity",icon:"fire"},{default:k((function(){return[E]})),_:1}),Object(j["i"])(c,{replace:"",to:"/user",icon:"friends"},{default:k((function(){return[_]})),_:1})]})),_:1})):Object(j["g"])("",!0)])})),A=(n("b0c0"),n("ade3")),N={name:"App",components:(S={},Object(A["a"])(S,p["b"].name,p["b"]),Object(A["a"])(S,h["a"].name,h["a"]),S)};n("df4c");N.render=T,N.__scopeId="data-v-5678b0f6";var I=N,P=n("5502"),L=n("41cb"),M=n("4360"),x=(n("245a"),Object(j["e"])(I));x.use(P["b"]),x.use(L["a"]),x.use(M["b"]),x.use(O["b"]),x.use(g["a"]),x.use(v["a"]),x.use(m["a"]),x.use(p["b"]),x.use(h["a"]),x.use(l["b"]),x.use(b["a"]),x.use(d["a"]),x.use(f["a"]),x.use(s["b"]),x.use(i["a"]),x.use(c["b"]),x.use(u["a"]),x.use(o["a"]),x.use(a["a"]),x.use(r["a"]).mount("#app")},"9fb0":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="Access-Token"},df4c:function(e,t,n){"use strict";n("4907")},fddb:function(e,t,n){}});
//# sourceMappingURL=app.c2a0eda8.js.map